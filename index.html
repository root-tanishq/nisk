<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>nisk</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a0b12;--bg2:#0e1329;--panel:rgba(255,255,255,.06);--muted:rgba(255,255,255,.12);--text:#eef0ff;--sub:#bfc5ff;--accent:#a8b4ff;--accent-2:#86f5ff;--danger:#ff7474;--ok:#79f3b5;
      --radius:20px;--rsm:14px;--shadow:0 20px 60px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.04);
      --glass: blur(14px) saturate(140%);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif; color:var(--text);
      background: radial-gradient(1200px 800px at 10% -10%,#1b1f3b 0%,#0b0e1d 60%),
                  radial-gradient(1200px 800px at 120% 120%,#0d2338 0%,#0b0e1d 60%);
      overflow-x:hidden; display:flex; align-items:center; justify-content:center; padding:32px;
    }
    /* floating aurora blobs */
    .bg-blob{ position:fixed; inset:auto; width:55vmax; height:55vmax; filter:blur(60px); opacity:.25; pointer-events:none; z-index:0; mix-blend:screen; }
    .b1{ top:-10vmax; left:-10vmax; background:conic-gradient(from 120deg, #8fb3ff, #7df0ff, #9c7dff, #8fb3ff); animation:float1 18s ease-in-out infinite; }
    .b2{ bottom:-18vmax; right:-12vmax; background:conic-gradient(from -40deg, #7df0ff, #a9ffcf, #8fb3ff, #7df0ff); animation:float2 22s ease-in-out infinite; }
    @keyframes float1{0%,100%{transform:translateY(0)}50%{transform:translateY(3vmax)}}
    @keyframes float2{0%,100%{transform:translateY(0)}50%{transform:translateY(-3vmax)}}

    .card{ position:relative; z-index:1; width:min(980px,100%); background:var(--panel); border:1px solid var(--muted); border-radius:var(--radius); box-shadow:var(--shadow); padding:26px; backdrop-filter:var(--glass);
      transition: transform .25s ease, box-shadow .25s ease; }
    .card:hover{ transform:translateY(-2px); box-shadow:0 30px 90px rgba(0,0,0,.55); }

    .header{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:14px;margin-bottom:4px}
    h1{font-size:clamp(22px,3.2vw,34px);margin:0;font-weight:800;letter-spacing:.3px;background:linear-gradient(90deg,#ffffff, #b2baff 40%, #86f5ff 70%);-webkit-background-clip:text;background-clip:text;color:transparent}
    .brand-sub{font-size:12px;color:var(--sub);opacity:.9}

    .marquee{
      position:relative; overflow:hidden; border:1px dashed rgba(168,180,255,.35); border-radius:999px; padding:6px 0; margin-top:6px; background:rgba(255,255,255,.03)
    }
    .marquee-track{display:flex;gap:30px;white-space:nowrap;animation:mar 22s linear infinite;color:var(--accent)}
    .marquee:hover .marquee-track{animation-play-state:paused}
    @keyframes mar{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:20px;margin-top:8px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    fieldset{border:1px solid var(--muted);border-radius:var(--rsm);padding:16px;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));}
    legend{padding:0 8px;color:#cfe0ff;letter-spacing:.2px}
    label{font-size:13px;color:#dfe4ff}

    .row{display:grid;grid-template-columns:1fr 220px;gap:12px;margin:12px 0}
    .row.inline{grid-template-columns:1fr 1fr}
    .input-wrap{position:relative}
    input[type="text"],input[type="number"],input[type="password"],.out{width:100%;background:rgba(8,10,24,.8);border:1px solid rgba(255,255,255,.12);color:var(--text);padding:13px 14px;border-radius:12px;outline:none;transition:border .2s, box-shadow .2s}
    input::placeholder{color:#8590bb}
    input:focus{border-color:#8fb3ff; box-shadow:0 0 0 3px rgba(143,179,255,.25)}
    input[type="number"]{appearance:textfield}
    input[type="number"]::-webkit-outer-spin-button,input[type="number"]::-webkit-inner-spin-button{appearance:none;margin:0}

    .checks{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;margin-top:6px}
    .checks label{display:flex;align-items:center;gap:8px;background:rgba(8,10,24,.8);border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:10px}

    .hint{font-size:12px;color:#a9b2e6;margin-top:6px}
    .actions{display:flex;gap:10px;align-items:center;margin-top:12px}

    .btn{background:linear-gradient(180deg,#6e79ff,#5667ff);border:none;color:white;padding:12px 16px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 10px 30px rgba(86,103,255,.35);transition:transform .15s ease, filter .15s ease}
    .btn:hover{transform:translateY(-1px); filter:brightness(1.05)}
    .btn:active{transform:translateY(0)}
    .secondary{background:linear-gradient(180deg,#1f2340,#1a203d);border:1px solid rgba(255,255,255,.14);color:#dbe1ff;box-shadow:none}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,.16);color:#d5dafb}
    .tiny{padding:8px 10px;border-radius:10px;font-size:12px}

    .peek{position:absolute;top:50%;right:8px;transform:translateY(-50%)}

    .out-wrap{position:relative}
    .out{font-size:16px;padding-right:112px;font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace}
    .icon-btn{position:absolute;top:50%;transform:translateY(-50%);right:8px;display:flex;gap:6px}

    .status{font-size:12px;color:#a7ffcf;margin-left:10px;opacity:0;transition:.25s ease}
    .status.show{opacity:1}

    .footer{margin-top:12px;font-size:12px;color:#a7b0e0;display:flex;flex-direction:column;gap:8px}
    .badge-warn{display:inline-flex;align-items:center;gap:6px;background:rgba(255,107,107,.12);color:#ffd4d4;border:1px solid rgba(255,107,107,.38);padding:7px 10px;border-radius:10px}
    .err{color:var(--danger);font-size:12px;margin-top:6px}

    .kbd{font-family:"JetBrains Mono", monospace; background:rgba(255,255,255,.08); padding:2px 6px; border:1px solid rgba(255,255,255,.16); border-radius:6px}
  </style>
</head>
<body>
  <div class="bg-blob b1"></div>
  <div class="bg-blob b2"></div>

  <div class="card">
    <div class="header">
      <div>
         <h1 style="color: white;">nisk</h1>
        <div class="brand-sub">nisk ~ <a href="https://github.com/root-tanishq/nisk" style="color: white;">@github.com/root-tanishq/nisk</a></div>
      </div>
    </div>
    <div class="marquee" aria-hidden="true">
      <div class="marquee-track">
        <span>Deterministic password generator</span>
        <span>Same input + salt ‚áí same password</span>
        <span>code @github.com/root-tanishq/nisk</span>
        <span>Deterministic password generator</span>
        <span>Same input + salt ‚áí same password</span>
        <span>code @github.com/root-tanishq/nisk</span>
      </div>
    </div>

    <div class="grid">
      <section>
        <fieldset>
          <legend>Inputs</legend>
          <div class="row">
            <label>
              Source phrase
              <div class="input-wrap">
                <input id="inp" type="password" placeholder="Enter any phrase / sentence" />
                <button id="peekInp" class="ghost tiny peek" title="Hold to peek" aria-label="Hold to peek">üëÅÔ∏è</button>
              </div>
            </label>
            <label>
              Salt
              <div class="input-wrap">
                <input id="salt" type="password" placeholder="Enter any salt value" />
                <button id="peekSalt" class="ghost tiny peek" title="Hold to peek" aria-label="Hold to peek">üëÅÔ∏è</button>
              </div>
            </label>
          </div>
          <div class="row inline">
            <label>
              Length
              <input id="len" type="number" min="4" max="128" value="15" />
            </label>
            <label>
              Algorithm rotation
              <input id="lvl" type="number" min="1" max="500" value="50" />
            </label>
          </div>
          <div class="checks" role="group" aria-label="Character sets">
            <label><input id="ckU" type="checkbox" checked /> Uppercase (A‚ÄìZ)</label>
            <label><input id="ckL" type="checkbox" checked /> Lowercase (a‚Äìz)</label>
            <label><input id="ckD" type="checkbox" checked /> Digits (0‚Äì9)</label>
            <label><input id="ckS" type="checkbox" checked /> Symbols (!@#$%^&*)</label>
          </div>
          <div class="hint">Deterministic: change any option ‚Üí password changes predictably.</div>
          <div id="err" class="err" hidden></div>
          <div class="actions">
            <button id="gen" class="btn">Generate</button>
            <button id="reset" class="btn secondary" type="button">Reset</button>
            <span id="status" class="status">Copied!</span>
          </div>
        </fieldset>
      </section>
      <section>
        <fieldset>
          <legend>Password</legend>
          <div class="out-wrap">
            <input id="out" class="out" type="password" readonly placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            <div class="icon-btn">
              <button id="toggle" class="ghost tiny" title="Show/Hide" aria-label="Toggle visibility">üôà</button>
              <button id="copy" class="ghost tiny" title="Copy" aria-label="Copy password">üìã</button>
            </div>
          </div>
          <div class="hint">Hidden by default. Use the eye to reveal. Copy writes to your clipboard.</div>
        </fieldset>
        <div class="footer">
          <span class="badge-warn">This product is AI‚Äëgenerated.</span>
          <span><strong>Tip:</strong> hold <span class="kbd">üëÅÔ∏è</span> to peek your inputs. Click <span class="kbd">üôà</span> to toggle the output.</span>
          <span><strong>Note from author:</strong> It's recommended to use sentences as source phrases for better entropy.</span>
        </div>
      </section>
    </div>
  </div>

  <script>
    const UPPER = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const LOWER = "abcdefghijklmnopqrstuvwxyz";
    const DIGIT = "0123456789";
    const SYMBOL = "!@#$%^&*";

    const $ = (id) => document.getElementById(id);
    const ui = { inp: $("inp"), salt: $("salt"), len: $("len"), lvl: $("lvl"),
      ckU: $("ckU"), ckL: $("ckL"), ckD: $("ckD"), ckS: $("ckS"),
      gen: $("gen"), reset: $("reset"), out: $("out"), toggle: $("toggle"), copy: $("copy"), status: $("status"), err: $("err"),
      peekInp: $("peekInp"), peekSalt: $("peekSalt") };

    function buildCharset() {
      let s = "";
      if (ui.ckU.checked) s += UPPER;
      if (ui.ckL.checked) s += LOWER;
      if (ui.ckD.checked) s += DIGIT;
      if (ui.ckS.checked) s += SYMBOL;
      return s;
    }

    function concatBytes(a, b){
      const out = new Uint8Array(a.length + b.length);
      out.set(a, 0); out.set(b, a.length); return out;
    }

    async function sha512(bytes){
      const buf = await crypto.subtle.digest("SHA-512", bytes);
      return new Uint8Array(buf);
    }

    async function deriveStream(input, salt, iterations, total){
      const enc = new TextEncoder();
      let data = concatBytes(enc.encode(input || ""), enc.encode(salt || ""));
      for (let i=0;i<Math.max(1, iterations);i++) data = await sha512(data);

      const out = new Uint8Array(total);
      let produced = 0, counter = 0, state = data;
      while (produced < total){
        const block = await sha512(concatBytes(state, new Uint8Array([counter & 0xff])));
        const chunk = Math.min(block.length, total - produced);
        out.set(block.subarray(0, chunk), produced);
        produced += chunk; counter++;
        state = await sha512(concatBytes(block, state));
      }
      return out;
    }

    function pick(bytes, idxRef, charset){
      const i = idxRef.i % bytes.length;
      const ch = charset[ bytes[i] % charset.length ];
      idxRef.i++;
      return ch;
    }

    function fisherYatesDeterministic(arr, bytes){
      let j = 0;
      for (let i = arr.length - 1; i > 0; i--){
        j = bytes[(arr.length - 1 - i) % bytes.length] % (i + 1);
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    async function generate() {
      ui.err.hidden = true; ui.err.textContent = ""; ui.status.classList.remove("show");
      let length = parseInt(ui.len.value, 10);
      const level = parseInt(ui.lvl.value, 10);
      if (!Number.isFinite(length) || length < 4) length = 15;
      const sets = [];
      if (ui.ckU.checked) sets.push(UPPER);
      if (ui.ckL.checked) sets.push(LOWER);
      if (ui.ckD.checked) sets.push(DIGIT);
      if (ui.ckS.checked) sets.push(SYMBOL);
      if (sets.length === 0){
        ui.err.textContent = "Please select at least one character set.";
        ui.err.hidden = false; return;
      }
      const charset = buildCharset();

      ui.gen.disabled = true;
      try {
        const need = length + sets.length + length;
        const bytes = await deriveStream(ui.inp.value, ui.salt.value, level, Math.max(64, need));
        const idxRef = { i: 0 };

        const out = [];
        for (const set of sets) out.push(pick(bytes, idxRef, set));
        while (out.length < length) out.push(pick(bytes, idxRef, charset));
        fisherYatesDeterministic(out, bytes.slice(idxRef.i));
        ui.out.value = out.join("");
      } catch (e){
        ui.err.textContent = "Unexpected error: " + (e && e.message ? e.message : e);
        ui.err.hidden = false;
      } finally {
        ui.gen.disabled = false;
      }
    }

    ui.gen.addEventListener('click', generate);
    ui.reset.addEventListener('click', () => {
      ui.inp.value = ""; ui.salt.value = "something"; ui.len.value = 15; ui.lvl.value = 50;
      ui.ckU.checked = ui.ckL.checked = ui.ckD.checked = ui.ckS.checked = true;
      ui.out.value = ""; ui.err.hidden = true; ui.status.classList.remove('show'); ui.out.type = 'password';
    });

    ui.toggle.addEventListener('click', () => {
      ui.out.type = ui.out.type === 'password' ? 'text' : 'password';
      ui.toggle.textContent = ui.out.type === 'password' ? 'üôà' : 'üëÅÔ∏è';
    });

    ui.copy.addEventListener('click', async () => {
      if (!ui.out.value) return;
      try{ await navigator.clipboard.writeText(ui.out.value);
        ui.status.textContent = 'Copied!'; ui.status.classList.add('show');
        setTimeout(()=>ui.status.classList.remove('show'), 1200);
      }catch{
        ui.status.textContent = 'Copy failed'; ui.status.classList.add('show');
        setTimeout(()=>ui.status.classList.remove('show'), 1500);
      }
    });

    function attachHoldToPeek(inputEl, buttonEl){
      const show = () => inputEl.type = 'text';
      const hide = () => inputEl.type = 'password';
      buttonEl.addEventListener('mousedown', show);
      buttonEl.addEventListener('touchstart', show, {passive:true});
      [ 'mouseup','mouseleave','touchend','touchcancel','blur' ].forEach(ev=>buttonEl.addEventListener(ev, hide));
    }
    attachHoldToPeek(ui.inp, ui.peekInp);
    attachHoldToPeek(ui.salt, ui.peekSalt);

    window.addEventListener('load', generate);
  </script>
</body>
</html>
